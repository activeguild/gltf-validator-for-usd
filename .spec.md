# GLTF Validator for USD - 仕様書

## 概要

GLTF/GLBファイルをアップロードして、USD（Universal Scene Description）環境での利用を前提とした品質チェックを行うWebアプリケーションです。

## 技術スタック

- **フロントエンド**: Next.js 15.5.3
- **UI/CSS**: TailwindCSS 4
- **3Dライブラリ**: Three.js
- **言語**: TypeScript
- **パッケージマネージャー**: pnpm

## 機能仕様

### 1. ファイルアップロード機能

- **対応ファイル形式**: `.gltf`, `.glb`
- **アップロード方法**: 
  - ファイル選択ダイアログ
  - ドラッグ&ドロップ（実装準備済み）
- **ファイルサイズ制限**: なし（ブラウザメモリ制限に依存）

### 2. バリデーション機能

#### 2.1 テクスチャ形式チェック

- **チェック内容**: JPEG/PNG形式のテクスチャを検出
- **警告条件**: `.jpg`, `.jpeg`, `.png` 拡張子のテクスチャが使用されている場合
- **推奨事項**: WebP形式への変換を推奨

#### 2.2 ポリゴン数チェック

- **チェック内容**: シーン全体のポリゴン数を計算
- **警告条件**: 総ポリゴン数が50,000を超える場合
- **表示情報**: 
  - 現在のポリゴン数
  - 推奨ポリゴン数（50,000以下）

#### 2.3 Scaleマイナス値チェック

- **チェック内容**: オブジェクトのScale値（X, Y, Z軸）をチェック
- **警告条件**: いずれかの軸でマイナス値が設定されている場合
- **問題**: オブジェクトの変形・崩れの原因となる

#### 2.4 法線マイナス値チェック

- **チェック内容**: メッシュの法線ベクトルをチェック
- **警告条件**: 法線にマイナス値が含まれている場合
- **問題**: レンダリング品質の低下・表示異常の原因となる

#### 2.5 Scaleキーフレームアニメーションチェック

- **チェック内容**: Scaleアニメーションの開始値をチェック
- **警告条件**: アニメーション開始時のScale値が0の場合
- **問題**: アニメーション再生時のオブジェクト消失・崩れの原因となる

#### 2.6 深い階層Meshアニメーションチェック

- **チェック内容**: メッシュの階層の深さとアニメーション設定をチェック
- **警告条件**: 階層が5レベルを超えかつアニメーションが設定されている場合
- **問題**: パフォーマンス低下の原因となる

### 3. 結果表示

#### 3.1 結果タイプ

- **エラー**: ファイル読み込み失敗など致命的な問題
- **警告**: 品質・パフォーマンスに影響する問題
- **情報**: 参考情報（ポリゴン数など）

#### 3.2 表示内容

- **メッセージ**: 問題の種類
- **詳細**: 具体的な数値や対象オブジェクト名
- **視覚的区別**: 色分けとアイコンによる識別

## SEO対策

- **メタデータ**: 適切なタイトルと説明文
- **言語設定**: HTML lang属性でja設定
- **構造化データ**: セマンティックなHTML構造

## ユーザビリティ

- **レスポンシブデザイン**: モバイル・タブレット対応
- **アクセシビリティ**: スクリーンリーダー対応
- **読み込み状態**: アニメーション付きローダー
- **エラーハンドリング**: 分かりやすいエラーメッセージ

## パフォーマンス

- **クライアントサイド処理**: ファイル解析はブラウザ内で実行
- **メモリ効率**: ファイルサイズに応じた適切なメモリ使用
- **非同期処理**: UI応答性を保つ非同期実装

## 制限事項

- **ブラウザ対応**: ES6+対応ブラウザが必要
- **ファイルサイズ**: ブラウザのメモリ制限に依存
- **外部依存**: インターネット接続不要（完全にクライアントサイド）

## 今後の拡張予定

- **ドラッグ&ドロップの有効化**
- **バッチファイル処理**
- **詳細レポートのエクスポート機能**
- **カスタマイズ可能な閾値設定**
- **プレビュー機能（3Dビューア）**

## 開発・運用

### 開発コマンド

```bash
# 開発サーバー起動
pnpm dev

# ビルド
pnpm build

# 本番サーバー起動
pnpm start

# リント
pnpm lint
```

### デプロイ環境

- **推奨プラットフォーム**: Vercel, Netlify
- **Node.js バージョン**: 18.0.0以上
- **ビルド出力**: 静的サイト対応

---

**更新日**: 2025年09月16日  
**バージョン**: 1.0.0